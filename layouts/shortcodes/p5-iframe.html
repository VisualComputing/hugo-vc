{{ $defver := `1.4.2` }}
{{ $sketch := .Get `sketch` }}
{{ $lib1 := .Get `lib1` }}
{{ $lib2 := .Get `lib2` }}
{{ $lib3 := .Get `lib3` }}
{{ $lib4 := .Get `lib4` }}
{{ $lib5 := .Get `lib5` }}
{{ $stylesheet := .Get `stylesheet` }}

<iframe
  marginheight="{{default "10" (.Get `marginHeight`)}}"
  marginwidth="{{default "10" (.Get `marginWidth`)}}"
  frameborder="{{default "1" (.Get `frameBorder`)}}"
  scrolling="{{default "no" (.Get `scrolling`)}}"
  id="{{ strings.TrimSuffix ".js" (path.Base $sketch) }}"
  style="width:{{ default "800" (.Get `width`) }}px; height:{{ default "600" (.Get `height`) }}px"
  srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            {{ if isset .Params "stylesheet" }} <link rel='stylesheet' href={{ $stylesheet }}> {{ end }}
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/{{ default $defver (.Get `ver`) }}/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/{{ default $defver (.Get `ver`) }}/addons/p5.sound.min.js></script>
            {{ if isset .Params "lib1" }} <script src={{ $lib1 }}></script> {{ end }}
            {{ if isset .Params "lib2" }} <script src={{ $lib2 }}></script> {{ end }}
            {{ if isset .Params "lib3" }} <script src={{ $lib3 }}></script> {{ end }}
            {{ if isset .Params "lib4" }} <script src={{ $lib4 }}></script> {{ end }}
            {{ if isset .Params "lib5" }} <script src={{ $lib5 }}></script> {{ end }}
            <script src={{ $sketch }}></script>
          </head>
          <body>
          </body>
        </html>
      "
></iframe>
